# NoobzVpn-Server

### What is NoobzVpn ?

Independent tunneling protocol is now in stable stage git-master repository.

### How is work ?
Like other VPN this app just bypass network traffic like tcp,udp including dns. with wide-custom payload and more flexibility. unlike openvpn / ssh tunnel using Concurrent Transport, we use Multiplex Transport (like shadowsock) model with more flexibility to custom Transport model. :)

### Tunneling :
* Dual-Stack IPv4/IPv6
* All TCP, UDP, DNS

### Transport :
* Dual-Stack IPv4/IPv6
* TCP plain & SSL (HTTP/WebSocket/Direct/Etc, custom with your own :p)
* UDP (QUIC/DNS/Etc) ? #comming_soon, we not include it yet. because very poor in my test. but we keep working on it.

# Android Client
[![NoobzVpn](badge/playstore_badge.svg)](https://play.google.com/store/apps/details?id=com.noobz.id.noobzvpn)

# Guide

### Minimum Requirements :
* Most all Linux Distribution with systemd is supported.
* CPU: x86_64(amd64), arm64(aarch64). 1 Core CPU. 512MB RAM. 
 ### Installation :
* follow this step with **root user / root access** (sudo/doas/etc)
##### Debian / Ubuntu / other Debian Base
```bash
# apt update
# apt install git
```
##### Fedora / CentOS / RHELL / other RedHat Based
```bash
# yum update
# yum install git
```
##### Install / Upgrade
```bash
# git clone https://github.com/noobz-id/noobzvpns.git
# cd noobzvpns/
# ./install.sh
```
##### Full Uninstall
```bash
# git clone https://github.com/noobz-id/noobzvpns.git
# cd noobzvpns/
# ./uninstall.sh
```


### Manage Service:

##### Start Service
* start service, you need to start it after installation to run noobzvpns service to serve the tunnel or to manage users database.
#
```bash
systemctl start noobzvpns.service
```

##### Restart Service
* restart service, if you change configuration you need to restart the service
```bash
systemctl restart noobzvpns.service
```

##### Stop Service
* stop service, if you want to stop it
```bash
systemctl stop noobzvpns.service
```

##### Auto Start
* enable auto-start service after reboot or at boot. (enabled by default)
```bash
systemctl enable noobzvpns.service
```
* disable auto-start service (you can start it manually)
```bash
systemctl disable noobzvpns.service
```

##### Status
* simple log to see noobzvpns service status and check the error if needed
```bash
systemctl status noobzvpns.service -l
```

##### Logs
* see full logs to see error, warning, debug etc.
```bash
journalctl -u noobzvpns.service
```


### Configuration :
To changed configuration can be done by using text editor like (vim, nano, etc).
```
/etc/noobzvpns/config.json
```

|   key     |   range   |   type       | example     |   description             |
|-----------|-----------|--------------|-------------|---------------------------|
| tcp_std   | 1-65535   | number-array | [80,8080]   |server port of tcp plain protocol |
| tcp_ssl   | 1-65535   | number-array | [443, 4433] |server port of tcp  with ssl protocol |
| identifier | 1-256 (cant't be empty)	| sensitive-string (a-z,0-9,A-Z,.,-)	| noobz-id.github.io | used for packet tagging signature/identifier for your server, you can put whatever for value like (domain/email/etc). make sure your client know this identifier, if not your user will never connected to your server |
| banner	| 0-1000 | any-string	| 	https://github.com/noobz-id/noobzvpns	|	send banner message for user when use your server like (note, text-ads, or anything)	|
| ssl_cert  | can't be empty | string-path | "/etc/noobzvpns/cert.pem"| ssl certificate, you can create self-signed certificate on your own. or using letsencrypt/certbot as alternative |
| ssl_key   | can't be empty  | string-path | "/etc/noobzvpns/key.pem" | ssl privatekey, both ssl_cert & ssl_key you can create your own. or using free alternative like letsencrypt with certbot |
| ssl_version | SSLv2, SSLv23, TLSv1_1, TLSv1_2, TLSv1_3, AUTO | string-unsensitive-case | AUTO | select spesific SSL/TLS version or set to AUTO for automatic selection (recommended, be flexible to client) |
| conn_timeout  |   5-60 | number-by-seconds   | 60    | give client connection timeout when no data arrived/sended |
| dns_resolver  | empty or resolv.conf path    | string-path   | /etc/resolv.conf  | dns resolver file, on many distribution like debian/ubuntu/base using /etc/resolv.conf to save dns address (nameserver), you can create and set new one (don't change /etc/resolv.conf) just create file like /etc/resolv.conf with "**nameserver dns1**", "**nameserver dns2**", etc. |
| http_ok   | [cr],[lf][crlf],[lfcr]    | smart-string-replacer | "HTTP/1.1 101 Switching Protocols[crlf]Upgrade: websocket[crlf]Connection: Upgrade[crlf][crlf]" | HTTP response for send to client if client detected using HTTP/s transport  |

### SSL Certificate
noobzvpn server has default ssl certificate (self-signed certificate) generated by openssl 
##### SSL Certificate
```
/etc/noobzvpns/cert.pem
```
##### SSL Private Key
```
/etc/noobzvpns/key.pem
```
You can change it using your own certificate or free certificate from [Let's Encrypt](https://letsencrypt.org/) using [cerbot](https://certbot.eff.org/) or [acme.sh](https://github.com/acmesh-official/acme.sh) , see configuration details above to settings path for ssl certificate and ssl private key.


### User Account
* Managing user(s) its simple and done by command line like adding/editing user, set expired days, max device login, max bandwidth, etc.
*  you need a ***root user / root access*** to do this.
*  ***make sure to start the noobzvpns.service first before manage the account***

```
Usage(normal): noobzvpns [action]
Usage(json): noobzvpns --json [action]

[action]:
--add USERNAME [args] [..] : add new account.
--edit USERNAME [args] [..] : edit existing account.
--rename USERNAME NEW_USERNAME [..] : change existing account username.
--block USERNAME [..] : blocking existing account.
--unblock USERNAME [..] : unblocking existing account.
--reset USERNAME [..] : reset account expired day (renew) & statistics.
--remove USERNAME [..] : remove existing account.
--print-user USERNAME [..] : print account info & statistics.
--print-all-user [..] : print all accounts info & statistics.
--opts [opts] [..] : most dangerous operations & no connfirmation.

[args]: (--add & --edit)
-p,-password PASSWORD : give the account password. (required in --add).
-e,-expired DAYS : give the account expiration. default: 0 = unlimited.
-d,-device UNITS : give the allowed max login device. default: 0 = unlimited.
-b,-bandwidth GIGA_BYTES : give the allowed max bandwidth. default: 0 = unlimited.

[opts]: (--opts).
-reset-all : reset all issued date (renew-expired) & statistic for all accounts.
-remove-all : WARNING! remove all accounts in database

[..]: continuous [action]
noobzvpns [action] [action] ...
```

#####  Examples:
* this is example for you to understand how the command-line users manager works.
```
1. add new unlimited account + password
noobzvpns --add USERNAME -p SeCuRePaSsWoRd000
# or
noobzvpns --add USERNAME -password SeCuRePaSsWoRd000

2. add new account + password + max 2 devices + max bandwidth 20 Giga Bytes + expired 30 day
noobzvpns --add USERNAME -p SeCuRePaSsWoRd000 -d 2 -b 20 -e 30
# or
noobzvpns --add USERNAME -password SeCuRePaSsWoRd000 -device 2 -bandwidth 20 -expired 30

3. edit existing account password + max 4 devices
noobzvpns --edit USERNAME -p SeCuRe123 -d 4
# or
noobzvpns --edit USERNAME -password SeCuRe123 -device 4

4. rename account
noobzvpns --rename USERNAME NEW_USERNAME

5. block account
noobzvpns --block USERNAME

6. unblock account
noobzvpns --unblock USERNAME

7. reset account
# use for renew issued date, and reset the bandwidth usage
noobzvpns --reset USERNAME

8. remove account
# use for remove account
noobzvpns --remove USERNAME

9. print specific accout
# git info only specific account
noobzvpns --print-user USERNAME 

10. print all user database
# get info for all registered account
noobzvpns --print-all-user

11. reset all accounts
# WARNING ! reset/renew issued date, bandwidth usage, etc for all registered accounts in database. be carefull this action can't be undone
noobzvpns --opts -reset-all

12. remove all accounts
# WARNING !!! remove all registered accounts in database. be carefull this action can't be undone.
noobzvpns --opts -remove-all


```

##### NOTE :
* for offline guide commands you just execute ```noobzvpns``` in your terminal / ssh and see the guide.
*  you need json-output for output result in command-line ?.  hopefully we add the **--json** options in command-line. just add it before **[action]**. ```noobzvpns --json [action]``` so the output/stdout will print as json in single-line format. the command-line process if success will return ```0``` any of that just fail/error/death.
* HIDDEN Command just for testing / debugging. maybe not for you, just ignore it :)
```
noobzvpns --start-service --debug
```

